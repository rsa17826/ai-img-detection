<!DOCTYPE html>
<html>
  <head>
    <title>Hello, World!</title>

    <!-- Include eel.js - note this file doesn't exist in the 'web' directory -->
    <script type="text/javascript" src="/eel.js"></script>
    <script type="text/javascript" src="./libloader.js"></script>
    <script type="text/javascript" src="./allfuncs.js"></script>
    <script type="text/javascript" src="./log.js"></script>
    <script type="text/javascript">
      const a = loadlib("allfuncs")
      ;(async () => {
        await a.bodyload()
        a.listen("#captureIdx", "change", function (e) {
          eel.startCapture(a.qs("#captureIdx").value)
        })
        eel.startCapture(a.qs("#captureIdx").value)
        a.listen("#stopCaptureBtn", "click", function (e) {
          eel.stopCapture()
        })
        a.listen("#quitAppBtn", "click", function (e) {
          eel.quitApp()
          window.close()
        })
        a.listen(
          "#setminconfidenceInput",
          ["input", "change"],
          function (e) {
            eel.jsSetminconfidence(
              a.qs("#setminconfidenceInput").value
            )
          }
        )
        a.listen(
          "#setblurPeopleInput",
          ["input", "change"],
          function (e) {
            eel.jsSetblurPeople(a.qs("#setblurPeopleInput").checked)
          }
        )
        a.listen(
          "#setsendOnPersonEnterInput",
          ["input", "change"],
          function (e) {
            eel.jsSetsendOnPersonEnter(
              a.qs("#setsendOnPersonEnterInput").checked
            )
          }
        )
        a.listen("#saveFrame", "click", function (e) {
          eel.jsSaveFrame()
        })
      })()
      eel.expose(receive_frame)
      function receive_frame(encoded_frame) {
        a.qs("#cameraFeed").src =
          "data:image/jpeg;base64," + encoded_frame
      }
    </script>
  </head>
  <style>
    .v {
      display: flex;
      flex-direction: column;
    }
    .h {
      display: flex;
      flex-direction: row;
    }
    .c{
      align-items: center;
    }
  </style>
  <body>
    <div class="v">
      <div class="v c">
        <div class="h">
          <label for="captureIdx">Camera Index:</label>
          <input
            type="number"
            name="captureIdx"
            id="captureIdx"
            value="1"
          />
          <button id="captureBtn">‚ñ∂Ô∏è Start Capture</button>
          <button id="stopCaptureBtn">üü• Stop Capture</button>
        </div>
        <div class="h">
          <label for="setminconfidenceInput">Min Confidence:</label>
          <input
            type="number"
            name="setminconfidenceInput"
            id="setminconfidenceInput"
            step="0.01"
            value="0.5"
          />
        </div>
        <div class="h">
          <label for="setblurPeopleInput">Blur People:</label>
          <input
            type="checkbox"
            name="setblurPeopleInput"
            id="setblurPeopleInput"
            checked="false"
          />

          <label for="setsendOnPersonEnterInput"
            >Send on Person Enter:</label
          >
          <input
            type="checkbox"
            name="setsendOnPersonEnterInput"
            id="setsendOnPersonEnterInput"
            value="false"
          />
        </div>
        <div class="h">
          <button id="quitAppBtn">üö™ Quit App</button>
          <button id="saveFrame">Save Frame</button>
        </div>
      </div>
      <img id="cameraFeed" alt="Camera Feed" />
    </div>
  </body>
</html>
